<!DOCTYPE html >
<html>
  <head>
  <!-- data-tochidden : initial TOC visibility
       data-tomaxlevel sets the choice within the h2-h5 range of maximum toc level
            value 0 or 1 means no TOC at all.
       data-acl can be set to member and team to set the right ACL styles
  -->
    <meta charset="utf-8">
    <title>Generating EPUB 3 for ReSpec or Bikeshed based W3C TR documents</title>
    <link rel="stylesheet" type="text/css" href="epub-generator.css"/>
    <style type="text/css">
      main section section { margin-left: 1.5rem; }
    </style>
  </head>
  <body>
      <p class="banner"><a accesskey="W" href="/"><img width="72" height="48" alt="W3C" src="http://www.w3.org/Icons/w3c_home" /></a> </p>
      <br />
      <h1 class="title">Generating EPUB 3 for ReSpec based W3C TR documents</h1>
    </header>
  	<main>

        <p>The goal of this service is to get an HTML document in <a href="http://www.w3.org/respec/">ReSpec</a>,
          or an HTML document <em>generated by</em>
          <a href="http://www.w3.org/respec/">ReSpec</a> or <a href="https://wiki.csswg.org/tools/bikeshed">Bikeshed</a>, and generate an
          EPUB&nbsp;3 file for off-line reading. ReSpec “sources” are transformed
          into HTML on the fly using a separate Web Service set up (at W3C) for that
          purpose. Style sheets, images, scripts, etc., are downloaded and
          included in the book, provided their path is a "subpath" of the original file (ie, they are in the
          same folder or a subfolder thereof). The service returns the EPUB&nbsp;3 content that can be
          stored locally.</p>
        <p>The package is <span style="font-style: italic;">not</span> a generic
          HTML&#10141;EPUB&nbsp;3 solution.</p>
        <form method="get" action="cgi-bin/epub-generator.py">
          <table>
            <tbody>
              <tr>
                <th><label for="url">URL:</label></th>
                <td><input name="url" id="url" size="70" type="text"></td>
              </tr>
              <tr>
                <th><label for="type">Input Type:</label></th>
                <td>
                  <select id="type" name="type" size="1">
                    <option selected="selected" value="html">HTML generated by
                      ReSpec or Bikeshed</option>
                    <option value="respec">ReSpec source to be transformed first</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td><br>
                </td>
                <td><input title="Generate" value="Go!" type="submit"></td>
              </tr>
            </tbody>
          </table>
        </form>
        <p>Generation may take quite some time. Be patient…</p>
    	<section>
        <h2>Running the service as an API</h2>
        <p>To run the service directly as an API (i.e., an HTTP GET service):</p>
        <dl>
            <dt>For an HTML file generated from ReSpec or Bikeshed:</dt>
            <dd><code>https://labs.w3.org/epub-generator/cgi-bin/epub-generator.py?type=html&amp;url=URL_OF_THE_FILE</code></dd>
            <dt>For an HTML file with ReSpec that has to be transformed first:</dt>
            <dd><code>https://labs.w3.org/epub-generator/cgi-bin/epub-generator.py?type=respec&amp;url=URL_OF_THE_FILE</code></dd>
        </dl>

        <p>Note that the <a href="https://wiki.csswg.org/tools/bikeshed">Bikeshed</a> version is not always reliable in reproducing a proper output. Most
        notably, the script may fail in finding the full, dated URI of the document and, therefore, cannot establish
        the document’s publication status. See the <a href="https://rawgit.com/iherman/respec2epub/master/Doc/build/html/todo.html">documentation</a> for further details.</p>
	    <h2>Source</h2>
	    <p>The source code is available on <a href="https://github.com/iherman/respec2epub">GitHub</a>.
	      It is fully in Python 2.7. There are two external dependencies: the <a href="https://pypi.python.org/pypi/html5lib">HTML5lib</a>, and the <a href="https://pythonhosted.org/tinycss/">tinycss</a> Python libraries. The repository also includes a script that can be ran on the command line.</p>
		</section>
    </main>

    <footer>
      <address><a href="mailto:ivan@w3.org">Ivan Herman</a>, &lt;ivan@w3.org&gt;, (W3C)</address>
      <p class="copyright">© 2015 Ivan Herman, W3C <br>License: <a href="http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231">W3C
        Software Notice and License</a>. </p>
     </footer>
 </body>
</html>
